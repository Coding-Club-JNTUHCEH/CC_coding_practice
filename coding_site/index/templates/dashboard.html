{% extends 'base.html' %}

{% load static %}
{% block content %}
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.jquery.min.js"></script>
<link href="https://cdn.rawgit.com/harvesthq/chosen/gh-pages/chosen.min.css" rel="stylesheet" /> -->
<!-- Latest compiled and minified CSS -->
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css"> -->



<link rel="stylesheet" href="{% static 'dashboard.css' %}?{% now 'U' %}">
<div class="container">
    <div class="filterBox">
        <div class="FilterHeading">
            <h4 style="text-align: center;"> Filter Problems</h4>
        </div>
        <div class="rangeBox">
            <form method="POST" action="" id="form">
                {% csrf_token %}
                <div class="form-row">
                    <div class="col">
                        <b>Difficulty :</b>
                    </div>
                    <div class="col">
                        <input type="number" class="form-control" placeholder="Min" name="minPts" value="{{ min }}">
                    </div>
                    <div class="col" style="max-width: fit-content;"> - </div>
                    <div class="col">
                        <input type="number" class="form-control" placeholder="Max" name="maxPts" value="{{ max }}">
                    </div>
                    <div class="col ">Tags:
                        <select class="selectpicker" id="listOfTags" name="listOfTags" multiple
                            data-selected-text-format="count">
                            <!-- <option value="null" selected></option> -->

                            {% for tag in tags %}
                            <option value="{{ tag }}" title="{{ tag }}">{{ tag }}</option>
                            {% endfor %}

                        </select>

                    </div>



                    <div class="col" style=" padding-left: 5rem;">
                        <button type="submit" class="btn btn-primary fivePercentMargin" id="submit">Apply</button>
                    </div>
                </div>

            </form>
        </div>

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>

    </div>


    <table class="table table-bordered" style="width: 95%;">
        <thead>
            <tr>
                <th scope="col">Contest</th>
                <th scope="col">Problem ID</th>
                <th scope="col">Problem Name</th>
                <th scope="col">Rating</th>
                <th scope="col">Submit</th>
            </tr>
        </thead>
        <tbody>
            {% for problem in problems %}
            <tr>
                <th scope="row">{{ problem.contestID }}</th>
                <td>{{ problem.index }}</td>
                <td>{{ problem.name }}</td>
                <td>{{ problem.rating }}</td>
                <td><a href={{ problem.link }} target="_blank" class="btn btn-primary">Try</a></td>
            </tr>
            {% endfor %}

    </table>

</div>

<div>
    {% if problems.has_other_pages %}
    <ul class="pagination">
        {% if problems.has_previous %}
        <li class="pagination-li"><a class="btn btn-primary cdp_i"
                href="?page={{ problems.previous_page_number }}">&laquo;</a></li>
        {% else %}
        <li class="disabled"><span>&laquo;</span></li>
        {% endif %}
        {% for i in problems.paginator.page_range %}
        {% if problems.number == i %}
        <li class="active"><span class="btn btn-primary">{{ i }} <span class="sr-only">(current)</span></span></li>
        {% elif i == 1 or i == 348%}
        <li class="pagination-li"><a class="btn btn-primary" href="?page={{ i }}">{{ i }}</a></li>
        {% elif i == 2 or i == 347 %}
        <li class="inactive"><span class="inactive">...</span></li>
        {% endif %}
        {% endfor %}
        {% if problems.has_next %}
        <li class="pagination-li"><a class="btn btn-primary" href="?page={{ problems.next_page_number }}">&raquo;</a>
        </li>
        {% else %}
        <li class="disabled"><span>&raquo;</span></li>
        {% endif %}
    </ul>
    {% endif %}
</div>

{% endblock %}